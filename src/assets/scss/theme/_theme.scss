@use 'sass:map';
@use './_colors.scss' as colors;
@use './_variables.scss' as vars;

// Определяем переменные темы
$theme: (
  'colors': (
    'primary': map.get(colors.$color-map, 'primary'),
    'secondary': map.get(colors.$color-map, 'secondary'),
    'light': map.get(colors.$color-map, 'white'),
    'dark': map.get(colors.$color-map, 'black'),
    'textPrimary': map.get(colors.$color-map, 'black'),
    'textSecondary': map.get(colors.$color-map, 'dark-gray'),
    'success': map.get(colors.$color-map, 'success'),
    'warning': map.get(colors.$color-map, 'warning'),
    'error': map.get(colors.$color-map, 'error'),
    'gray': map.get(colors.$color-map, 'gray'),
    'supportGray': map.get(colors.$color-map, 'support-gray'),
    'silverGray': map.get(colors.$color-map, 'silver-gray'),
    'darkGray': map.get(colors.$color-map, 'dark-gray'),
    'lightGray': map.get(colors.$color-map, 'light-gray'),
    'info': map.get(colors.$color-map, 'info'),
    'accent': map.get(colors.$color-map, 'accent'),
  ),
  'spacing': (
    'xs': vars.$spacing-xs,
    'sm': vars.$spacing-sm,
    'md': vars.$spacing-md,
    'lg': vars.$spacing-lg,
    'xl': vars.$spacing-xl,
  ),
  'typography': (
    'fontWeightRegular': vars.$font-weight-regular,
    'fontWeightMedium': vars.$font-weight-medium,
    'fontWeightBold': vars.$font-weight-bold,
  ),
  'shadows': (
    'small': vars.$shadow-small,
    'medium': vars.$shadow-medium,
    'large': vars.$shadow-large,
  ),
  'transitions': (
    'fast': vars.$transition-fast,
    'medium': vars.$transition-medium,
    'slow': vars.$transition-slow,
  ),
  'input': (
    'bg': map.get(colors.$color-map, 'input-bg'),
    'border': map.get(colors.$color-map, 'input-border'),
    'borderHover': map.get(colors.$color-map, 'input-border-hover'),
    'borderFocus': map.get(colors.$color-map, 'input-border-focus'),
    'text': map.get(colors.$color-map, 'input-text'),
    'placeholder': map.get(colors.$color-map, 'input-placeholder'),
    'disabledBg': map.get(colors.$color-map, 'input-disabled-bg'),
    'disabledText': map.get(colors.$color-map, 'input-disabled-text'),
    'errorBorder': map.get(colors.$color-map, 'input-error-border'),
    'errorText': map.get(colors.$color-map, 'input-error-text'),
  )
);

// Миксин для применения темы
@mixin theme {
  @each $category, $values in $theme {
    @each $key, $value in $values {
      --#{$category}-#{$key}: #{$value};
    }
  }
}

// Применяем тему к корневому элементу
:root {
  @include theme;
}

// Экспортируем значения для styled-components
:export {
  @each $category, $values in $theme {
    @each $key, $value in $values {
      #{$category}-#{$key}: #{$value};
    }
  }
}
